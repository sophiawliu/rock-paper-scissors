<!DOCTYPE html>
<html>

    <head>
    <meta charset="UTF-8">
    <title>Rock Paper Scissors</title>
    </head>

    <body>
        <script>
            function getRandomInt(max) {
                return Math.floor(Math.random() * max);
            }

            function getComputerChoice() {
                const choices = ['rock', 'paper', 'scissors'];
                return choices[getRandomInt(3)];
            }
            
            function determineWinner(p, c) { // p !== c
                if (p === "rock") {
                    if (c === "paper") {
                        return c;
                    } else {
                        return p;
                    }
                } else if (p === "paper") {
                    if (c === "rock") {
                        return p;
                    } else {
                        return c;
                    }
                } else {
                    if (c === "paper") {
                        return p;
                    } else {
                        return c;
                    }
                }
            }

            function playerWinOrLose(playerSelection, computerSelection) {
                if (determineWinner(playerSelection, computerSelection) === playerSelection) {
                    return true;
                }
                return false;
            }

            function playRound(playerSelection, computerSelection) {
                playerSelection = playerSelection.toLowerCase();
                // let result;
                // let winningChoice;
                // let losingChoice;
                if (playerSelection === computerSelection) {
                    // return `it's a tie! you both chose ${playerSelection}!`
                    return "tied"; // TIE
                } else if (playerWinOrLose(playerSelection, computerSelection)) {
                    // result = "win";
                    // winningChoice = playerSelection;
                    // losingChoice = computerSelection;
                    return "won"; // PLAYER WINS
                } else {
                    // result = "lose";
                    // winningChoice = computerSelection;
                    // losingChoice = playerSelection;
                    return "lost"; // COMPUTER WINS
                }
                // return `you ${result}! ${winningChoice} beats ${losingChoice}!`
            }

            function game() {
                let playerScore = 0;
                let computerScore = 0;
                for (let i = 0; i < 5; i++) {
                    playerSelection = prompt("rock, paper, scissors?");
                    computerSelection = getComputerChoice();
                    let result = playRound(playerSelection, computerSelection);
                    if (result === "tied") {
                        playerScore++;
                        computerScore++;
                    } else if (result === "won") {
                        playerScore++;
                    } else {
                        computerScore++;
                    }
                    console.log(`---------------------------------\n${playerSelection} vs. ${computerSelection}. you ${result}!\nYOU ${playerScore} | COMPUTER ${computerScore}`)
                }
                let finalResult = "";
                if (playerScore > computerScore) {
                    finalResult = "WON";
                } else if (playerScore < computerScore) {
                    finalResult = "LOST";
                } else {
                    finalResult = "TIED"
                }
                console.log(`~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nYou ${finalResult}! The final score was...\nYOU: ${playerScore} | COMPUTER: ${computerScore}\n`)
            }

            game();
        </script>
    </body>

</html>